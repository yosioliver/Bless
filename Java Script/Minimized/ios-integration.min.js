function calliOSFunction(e,a,t,n){var r="js-frame:";if(n.functionname=e,a)if("function"==typeof a){var i=createCallbackFunction(e+"_successCallback",a);n.success=i}else n.success=a;if(t)if("function"==typeof t){var i=createCallbackFunction(e+"_errorCallback",t);n.error=i}else n.error=t;r+=JSON.stringify(n);var o=createIFrame(r);o.parentNode.removeChild(o)}function createCallbackFunction(e,a){if(a&&null!=a.name&&a.name.length>0)return a.name;if("function"!=typeof window[e+0])return window[e+0]=a,__functionIndexMap[e]=0,e+0;for(var t=__functionIndexMap[e],n=a.toString(),r=0;t>=r;r++){var i=e+r;if(window[i].toString()==n)return i}var o=++__functionIndexMap[e];return window[e+o]=a,e+o}function createIFrame(e){var a=document.documentElement,t=document.createElement("IFRAME");return t.setAttribute("src",e),a.appendChild(t),t}function onSuccess(e){if(e){var a=JSON.parse(e),t=Object.keys(a.result)[0];"readFromDB"==t&&getFromDatabase(a.result.readFromDB,stringPageTypeCurrent)}}function onError(e){if(e){JSON.parse(e)}}function readfromDB(){var e={};e.data={},e.data.SPAJAnswers={},e.data.SPAJAnswers.columns="elementID,Value,SPAJID,CustomerID",e.data.SPAJAnswers.where="",calliOSFunction("readfromDB:",onSuccess,onError,e)}function savetoDB(){var e,a,t=!0;stringPageSectionCurrent==stringPageSectionBeneficiariesList&&(0==t||1==intBeneficiariesListID||ReplaceHTMLNameOnValidate("",$label.text()+"Mohon masukkan minimal 1 orang calon penerima manfaat")),0==t||$("input:text[required]").each(function(){e=$(this).val();var a=$("label[for='"+this.id+"']");return void 0==e||null==e||""==e?(ReplaceHTMLNameOnValidate("",a.text()+" harap diisi."),t=!1,!1):void 0}),0==t||$("input:radio[required]").each(function(){e=getRadioButtonGeneral($(this).attr("name"));var n=$("label[for='"+this.name+"']");return a!=$(this).attr("name")&&void 0==e?(ReplaceHTMLNameOnValidate("",n.text()+" harap dipilih."),a=$(this).attr("name"),t=!1,!1):void 0});var n=!1;if(stringPageSectionCurrent==stringPageSectionForm&&stringPageTypeCurrent==stringPageTypeForm&&($("input:text[data-customvalidation='income']").each(function(){return $(this).val()>0?(n=!0,!1):void 0}),0==n&&(t=!1,ReplaceHTMLNameOnValidate("","Harap mengisi penghasilan kotor minimum satu jenis !."))),stringPageSectionCurrent==stringPageSectionBeneficiariesList)if(0==t);else if(100!=intSharePercentage)return ReplaceHTMLNameOnValidate("","Jumlah share percentage harus 100 !."),t=!1,!1;if(0==t);else{var r;stringPageSectionCurrent==stringPageSectionHealthQuestionnaire?r=arrayHealthQuestionnaire:stringPageSectionCurrent==stringPageSectionBeneficiariesList?(arrayAdd(arrayBeneficiariesList,"TextBeneficiariesListSharePercentage",getTextForm("TextBeneficiariesListSharePercentage")),r=arrayBeneficiariesList):r=setToDatabase(stringPageTypeCurrent);var i=JSONGenerator(r);calliOSFunction("savetoDB:",onSuccess,onError,i),arrayHealthQuestionnaire=[],arrayBeneficiariesList=[]}}function PrintData(){savetoDB()}function AutoPopulate(e){var a=JSON.parse(e),t=Object.keys(a.result)[0];"autopopulateFromDB"==t&&getFromDatabase(a.result.autopopulateFromDB,stringPageTypeCurrent)}function ReadData(){readfromDB()}function ReplaceHTMLNameOnValidate(e,a){var t={};t.data={},t.data.title=e,t.data.body=a,calliOSFunction("showAlert:",onSuccess,onError,t)}__functionIndexMap={};
